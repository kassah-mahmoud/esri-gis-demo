"use strict";(self.webpackChunkesri_map=self.webpackChunkesri_map||[]).push([[6009,9951],{71277:function(e,t,r){function a(e){return e=e||globalThis.location.hostname,u.some((function(t){var r;return null!=(null==(r=e)?void 0:r.match(t))}))}function n(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(l)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(s)||null!=t.match(o)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}r.d(t,{XO:function(){return a},pJ:function(){return n}});var l=/^devext.arcgis.com$/,s=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,o=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,l,s,/^jsapps.esri.com$/,i,o]},36009:function(e,t,r){r.r(t),r.d(t,{getPatternDescriptor:function(){return C},getSizeFromOptions:function(){return E},getSymbolLayerFill:function(){return P},previewSymbol3D:function(){return H}});var a=r(1413),n=r(15861),l=r(87757),s=r(65905),i=r(86950),o=(r(93169),r(10064)),u=r(32718),p=r(92026),c=r(66978),h=r(17842),m=r(79563),f=r(29122),y=r(73627),v=r(37817),b=r(1682),d=r(74579),g=r(19951),w=v.b_.size,k=v.b_.maxSize,x=v.b_.maxOutlineSize,M=v.b_.lineWidth,S=v.b_.tallSymbolWidth,L=u.Z.getLogger("esri.symbols.support.previewSymbol3D");function z(e){var t=e.outline,r=(0,p.pC)(e.material)?e.material.color:null,a=(0,p.pC)(r)?r.toHex():null;if((0,p.Wi)(t)||"pattern"in t&&(0,p.pC)(t.pattern)&&"style"===t.pattern.type&&"none"===t.pattern.style)return"fill"===e.type&&"#ffffff"===a?{color:"#bdc3c7",width:.75}:null;var n=(0,h.F2)(t.size)||0;return{color:"rgba("+((0,p.pC)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,x),style:"pattern"in t&&(0,p.pC)(t.pattern)&&"style"===t.pattern.type?(0,m.Sp)(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.a,a=(0,i._Y)(e),n=a.h,l=a.s/t,s=100-(100-a.v)/t,o=(0,i.xr)({h:n,s:l,v:s}),u=o.r,p=o.g,c=o.b;return[u,p,c,r]}function j(e){return"water"===e.type?(0,p.Wi)(e.color)?null:e.color:(0,p.Wi)(e.material)||(0,p.Wi)(e.material.color)?null:e.material.color}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=j(e);if(!r){if("fill"===e.type)return null;var a=m.Ne.r,n=(0,v.uH)(a,t);return[n,n,n,100]}for(var l=r.toRgba(),s=0;s<3;s++)l[s]=(0,v.uH)(l[s],t);return l}function C(e,t){return N.apply(this,arguments)}function N(){return(N=(0,n.Z)(l.mark((function e(t,r){var a;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(a=t.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,m.Od)((0,s.V)("esri/symbols/patterns/".concat(a,".png")),r.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return e.outline?z(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function O(e,t){var r=j(e);if(!r)return null;var a="rgba(";return a+=(0,v.uH)(r.r,t)+",",a+=(0,v.uH)(r.g,t)+",",(a+=(0,v.uH)(r.b,t)+",")+r.a+");"}function D(e,t){var r=O(e,t);return r?"pattern"in e&&(0,p.pC)(e.pattern)&&"style"===e.pattern.type&&"none"===e.pattern.style?null:{color:r,width:Math.min(e.size?(0,h.F2)(e.size):.75,x),style:"pattern"in e&&(0,p.pC)(e.pattern)&&"style"===e.pattern.type?(0,m.Sp)(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?(0,h.F2)(2):e.join:null}:{}}function W(e,t,r){var a=.75*r;return{type:"linear",x1:a?.25*a:0,y1:a?.5*a:0,x2:a||4,y2:a?.5*a:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function E(e){var t="number"==typeof(null==e?void 0:e.size)?null==e?void 0:e.size:null;return t?(0,h.F2)(t):null}function J(e,t){var r,a=E(t),n=t&&t.maxSize?(0,h.F2)(t.maxSize):null,l=t&&t.disableUpsampling,i=e.symbolLayers,o=[],u=0,p=0,m=i.getItemAt(i.length-1);return m&&"icon"===m.type&&(r=m.size&&(0,h.F2)(m.size)),i.forEach((function(i){if("icon"===i.type||"object"===i.type){var c="icon"===i.type?i.size&&(0,h.F2)(i.size):0,m=a||c?Math.ceil(Math.min(a||c,n||k)):w;if(i&&i.resource&&i.resource.href){var x=function(e,t){var r=t&&t.resource,a=r&&r.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(a&&"object"!==t.type)return Promise.resolve((0,d.nf)(e,t));var n=(0,s.V)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?(0,g.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||n})):Promise.resolve(n)}(e,i).then((function(e){var t=i.get("material.color"),r=function(e){return"icon"===e.type?"multiply":"tint"}(i);return(0,b.r)(e,m,t,r,l)})).then((function(e){var t=e.width,r=e.height;return u=Math.max(u,t),p=Math.max(p,r),[{shape:{type:"image",x:0,y:0,width:t,height:r,src:e.url},fill:null,stroke:null}]}));o.push(x)}else{var M,L=m;"icon"===i.type&&r&&a&&(L=m*(c/r));var Z="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(M=t.symbolConfig)?void 0:M.isTall)||"object"===i.type&&function(e){var t=e.depth,r=e.height,a=e.width;return a&&t&&r&&a===t&&a<r}(i);u=Math.max(u,Z?S:L),p=Math.max(p,L),o.push(Promise.resolve(function(e,t,r){var a=[];if(!e)return a;switch(e.type){case"icon":var n=t,l=t;switch(e.resource&&e.resource.primitive||f.S){case"circle":a.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:P(e,0),stroke:z(e)});break;case"square":a.push({shape:{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[0,0]},{command:"L",values:[n,0]},{command:"L",values:[n,l]},{command:"Z",values:[]}]},fill:P(e,0),stroke:z(e)});break;case"triangle":a.push({shape:{type:"path",path:[{command:"M",values:[0,l]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,l]},{command:"Z",values:[]}]},fill:P(e,0),stroke:z(e)});break;case"cross":a.push({shape:{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[.5*n,l]},{command:"M",values:[0,.5*l]},{command:"L",values:[n,.5*l]}]},stroke:F(e)});break;case"x":a.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[n,l]},{command:"M",values:[n,0]},{command:"L",values:[0,l]}]},stroke:F(e)});break;case"kite":a.push({shape:{type:"path",path:[{command:"M",values:[0,.5*l]},{command:"L",values:[.5*n,0]},{command:"L",values:[n,.5*l]},{command:"L",values:[.5*n,l]},{command:"Z",values:[]}]},fill:P(e,0),stroke:z(e)})}break;case"object":switch(e.resource&&e.resource.primitive||y.S){case"cone":var s=W(P(e,0),P(e,-.6),r?S:t),i=(0,v.TE)(t,r);a.push({shape:i[0],fill:s}),a.push({shape:i[1],fill:s});break;case"inverted-cone":var o=P(e,0),u=W(o,P(e,-.6),t),p=(0,v.DY)(t);a.push({shape:p[0],fill:u}),a.push({shape:p[1],fill:o});break;case"cube":var c=(0,v.Pc)(t,r);a.push({shape:c[0],fill:P(e,0)}),a.push({shape:c[1],fill:P(e,-.3)}),a.push({shape:c[2],fill:P(e,-.5)});break;case"cylinder":var h=W(P(e,0),P(e,-.6),r?S:t),m=(0,v.EB)(t,r);a.push({shape:m[0],fill:h}),a.push({shape:m[1],fill:h}),a.push({shape:m[2],fill:P(e,0)});break;case"diamond":var b=(0,v.XX)(t);a.push({shape:b[0],fill:P(e,-.3)}),a.push({shape:b[1],fill:P(e,0)}),a.push({shape:b[2],fill:P(e,-.3)}),a.push({shape:b[3],fill:P(e,-.7)});break;case"sphere":var d=W(P(e,0),P(e,-.6));d.x1=0,d.y1=0,d.x2=.25*t,d.y2=.25*t,a.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:d});break;case"tetrahedron":var g=(0,v.tp)(t);a.push({shape:g[0],fill:P(e,-.3)}),a.push({shape:g[1],fill:P(e,0)}),a.push({shape:g[2],fill:P(e,-.6)})}}return a}(i,L,Z)))}}})),(0,c.as)(o).then((function(e){var r=[];return e.forEach((function(e){e.value?r.push(e.value):e.error&&L.warn("error while building swatchInfo!",e.error)})),(0,b.w)(r,[u,p],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function _(){return(_=(0,n.Z)(l.mark((function e(t,r){var n,s,i,o,u,c,m,f,y,d,g,x,M,S,L,N,F,O,W,J,_,H,U,T,$,q,V,Y,I,R,X,A,K;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="mesh-3d"===t.type,s=t.symbolLayers,i=E(r),o=r&&r.maxSize?(0,h.F2)(r.maxSize):null,u=i||w,c=[],m=0,f=0,y=!1,d=0;case 3:if(!(d<s.length)){e.next=42;break}if(g=s.getItemAt(d),x=[],!n||"fill"===g.type){e.next=7;break}return e.abrupt("continue",39);case 7:M=v.JZ.fill[0],e.t0=g.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?28:"water"===e.t0?33:38;break;case 11:if(S=z(g),L=Math.min(u,o||k),m=Math.max(m,L),f=Math.max(f,L),y=!0,N=P(g,0),F="pattern"in g&&g.pattern,O=j(g),e.t1=!n&&(0,p.pC)(F)&&"style"===F.type&&"solid"!==F.style&&O,!e.t1){e.next=20;break}return e.next=19,C(F,O);case 19:N=e.sent;case 20:return x.push({shape:M,fill:N,stroke:S}),e.abrupt("break",38);case 22:if(W=D(g,0),!(0,p.Wi)(W)){e.next=25;break}return e.abrupt("break",38);case 25:return J={stroke:W,shape:M},m=Math.max(m,w),f=Math.max(f,w),x.push(J),e.abrupt("break",38);case 28:return _=(0,a.Z)({join:"round",width:1},D(g,-.4)),H=P(g,0),U=P(g,-.2),T=Math.min(u,o||k),$=(0,v.EV)(T),_.width=1,x.push({shape:$[0],fill:U,stroke:_}),x.push({shape:$[1],fill:U,stroke:_}),x.push({shape:$[2],fill:H,stroke:_}),q=w,V=.7*w+.5*T,m=Math.max(m,q),f=Math.max(f,V),e.abrupt("break",38);case 33:return Y=j(g),I=Z(Y),R=Z(Y,2),X=Z(Y,3),A=(0,v.ht)(),y=!0,x.push({shape:A[0],fill:I}),x.push({shape:A[1],fill:R}),x.push({shape:A[2],fill:X}),K=Math.min(u,o||k),m=Math.max(m,K),f=Math.max(f,K),e.abrupt("break",38);case 38:c.push(x);case 39:d++,e.next=3;break;case 42:return e.abrupt("return",Promise.resolve((0,b.w)(c,[m,f],{node:r&&r.node,scale:y,opacity:r&&r.opacity})));case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){if(0===e.symbolLayers.length)return Promise.reject(new o.Z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return J(e,t);case"line-3d":return function(e,t){var r,n=e.symbolLayers,l=[],s=(0,d.YW)(e),i=E(t),o=(t&&t.maxSize?(0,h.F2)(t.maxSize):null)||x,u=0,c=0;return n.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var n=[];switch(e.type){case"line":var s=D(e,0);if((0,p.Wi)(s))break;var h=s&&s.width||0;0===t&&(r=h);var m=Math.min(i||h,o),f=0===t?m:i?m*(h/r):m,y=f>M/2?2*f:M;c=Math.max(c,f),u=Math.max(u,y),s.width=f,n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[u,.5*c]}]},stroke:s});break;case"path":var b=Math.min(i||w,o),d=P(e,0),g=P(e,-.2),k=O(e,-.4),x=k?{color:k,width:1}:{};if("quad"===e.profile){var S=e.width,L=e.height,z=(0,v.eb)(S&&L?S/L:1,0===L,0===S),Z=(0,a.Z)((0,a.Z)({},x),{},{join:"bevel"});n.push({shape:z[0],fill:g,stroke:Z}),n.push({shape:z[1],fill:g,stroke:Z}),n.push({shape:z[2],fill:d,stroke:Z})}else n.push({shape:v.JZ.pathSymbol3DLayer[0],fill:g,stroke:x}),n.push({shape:v.JZ.pathSymbol3DLayer[1],fill:d,stroke:x});c=Math.max(c,b),u=c}l.push(n)}})),Promise.resolve((0,b.w)(l,[u,c],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}(e,t);case"polygon-3d":case"mesh-3d":return function(e,t){return _.apply(this,arguments)}(e,t)}return Promise.reject(new o.Z("symbolPreview: swatchInfo3D","symbol not supported."))}},19951:function(e,t,r){r.r(t),r.d(t,{fetchSymbolFromStyle:function(){return f},resolveWebStyleSymbol:function(){return m}});var a=r(76626),n=r(71277),l=r(10064),s=r(35995),i=r(70032),o=r(53283),u=r(42283),p=r(1472),c=r(86423),h=r(81854);function m(e,t,r,a){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,r){var a=c.wm.replace(/\{SymbolName\}/gi,e.name);return(0,c.EJ)(a,r).then((function(e){var r=(0,c.KV)(e.data);return(0,u.im)(r,{portal:t.portal,url:(0,s.mN)((0,s.Yd)(a)),origin:"portal-item"})}))}(e,t,a):(0,c.n2)(e,t,a).then((function(n){return f(n,e.name,t,r,a)})):Promise.reject(new l.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function f(e,t,r,m,f){var y=e.data,v={portal:r&&r.portal||i.Z.getDefault(),url:(0,s.mN)(e.baseUrl),origin:"portal-item"},b=y.items.find((function(e){return e.name===t}));if(!b){var d="The symbol name '".concat(t,"' could not be found");return Promise.reject(new l.Z("symbolstyleutils:symbol-name-not-found",d,{symbolName:t}))}var g=(0,o.f)((0,c.v9)(b,m),v),w=b.thumbnail&&b.thumbnail.href,k=b.thumbnail&&b.thumbnail.imageData;(0,n.XO)()&&(g=(0,n.pJ)(g),w=(0,n.pJ)(w));var x={portal:r.portal,url:(0,s.mN)((0,s.Yd)(g)),origin:"portal-item"};return(0,c.EJ)(g,f).then((function(n){var l="cimRef"===m?(0,c.KV)(n.data):n.data,s=(0,u.im)(l,x);if(s&&(0,a.dU)(s)){if(w){var i=(0,o.f)(w,v);s.thumbnail=new h.p({url:i})}else k&&(s.thumbnail=new h.p({url:"data:image/png;base64,".concat(k)}));e.styleUrl?s.styleOrigin=new p.Z({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new p.Z({portal:r.portal,styleName:e.styleName,name:t}))}return s}))}}}]);
//# sourceMappingURL=6009.22f67822.chunk.js.map