"use strict";(self.webpackChunkesri_map=self.webpackChunkesri_map||[]).push([[9815],{6388:function(e,t,r){r.d(t,{Fp:function(){return f},RL:function(){return m},UV:function(){return u},bk:function(){return s}});var i=r(29439),n=r(37762),a=r(46228),o=r(77981),l=r(691);function f(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?f(t[0]):null;case"CIMVectorMarker":var r,i=e.markerGraphics;if(!i||1!==i.length)return null;var n=i[0];if(!n)return null;var a=n.geometry;if(!a)return null;var o=n.symbol;return!o||"CIMPolygonSymbol"!==o.type&&"CIMLineSymbol"!==o.type||null!=(r=o.symbolLayers)&&r.some((function(e){return!!e.effects}))?null:{geom:a,asFill:"CIMPolygonSymbol"===o.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function c(e){var t,r=1/0,i=-1/0,a=1/0,o=-1/0,l=(0,n.Z)(e);try{for(l.s();!(t=l.n()).done;){var f,c=t.value,s=(0,n.Z)(c);try{for(s.s();!(f=s.n()).done;){var u=f.value;u[0]<r&&(r=u[0]),u[0]>i&&(i=u[0]),u[1]<a&&(a=u[1]),u[1]>o&&(o=u[1])}}catch(m){s.e(m)}finally{s.f()}}}catch(m){l.e(m)}finally{l.f()}return[r,a,i,o]}function s(e){return e?e.rings?c(e.rings):e.paths?c(e.paths):(0,o.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function u(e,t,r,n,a){var o=(0,i.Z)(e,4),l=o[0],f=o[1],c=o[2],s=o[3];if(c<l||s<f)return[0,0,0];var u=c-l,m=s-f,v=Math.floor(31.5),y=(128-2*(v+1))/Math.max(u,m),h=Math.round(u*y)+2*v,p=Math.round(m*y)+2*v,d=1;t&&(d=p/y/(t.ymax-t.ymin));var g=0,N=0;if(n)if(a){if(t&&r&&t.ymax-t.ymin>0){var S=(t.xmax-t.xmin)/(t.ymax-t.ymin);g=n.x/(r*S),N=n.y/r}}else g=n.x,N=n.y;return g=.5*(t.xmax+t.xmin)+g*(t.xmax-t.xmin),N=.5*(t.ymax+t.ymin)+N*(t.ymax-t.ymin),g-=l,N-=f,g*=y,N*=y,[d,(g+=v)/h-.5,-((N+=v)/p-.5)]}function m(e){var t,r=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),a=function(e){var t,r=1/0,i=-1/0,a=1/0,o=-1/0,f=(0,n.Z)(e);try{for(f.s();!(t=f.n()).done;){var c,s=t.value,u=(0,n.Z)(s);try{for(u.s();!(c=u.n()).done;){var m=c.value;m[0]<r&&(r=m[0]),m[0]>i&&(i=m[0]),m[1]<a&&(a=m[1]),m[1]>o&&(o=m[1])}}catch(v){u.e(v)}finally{u.f()}}}catch(v){f.e(v)}finally{f.f()}return new l.Z(r,a,i-r,o-a)}(r),o=Math.floor(31.5),f=(128-2*(o+1))/Math.max(a.width,a.height),c=Math.round(a.width*f)+2*o,s=Math.round(a.height*f)+2*o,u=[],m=(0,n.Z)(r);try{for(m.s();!(t=m.n()).done;){var y=t.value;if(y&&y.length>1){var h,p=[],d=(0,n.Z)(y);try{for(d.s();!(h=d.n()).done;){var g=h.value,N=(0,i.Z)(g,2),S=N[0],b=N[1];S-=a.x,b-=a.y,S*=f,b*=f,S+=o-.5,b+=o-.5,e.asFill?p.push([S,b]):p.push([Math.round(S),Math.round(b)])}}catch(O){d.e(O)}finally{d.f()}if(e.asFill){var k=p.length-1;p[0][0]===p[k][0]&&p[0][1]===p[k][1]||p.push(p[0])}u.push(p)}}}catch(O){m.e(O)}finally{m.f()}var C=function(e,t,r,i){for(var a=t*r,o=new Array(a),l=i*i+1,f=0;f<a;++f)o[f]=l;var c,s=(0,n.Z)(e);try{for(s.s();!(c=s.n()).done;)for(var u=c.value,m=u.length,v=1;v<m;++v){var y=u[v-1],h=u[v],p=void 0,d=void 0,g=void 0,N=void 0;y[0]<h[0]?(p=y[0],d=h[0]):(p=h[0],d=y[0]),y[1]<h[1]?(g=y[1],N=h[1]):(g=h[1],N=y[1]);var S=Math.floor(p)-i,b=Math.floor(d)+i,k=Math.floor(g)-i,C=Math.floor(N)+i;S<0&&(S=0),b>t&&(b=t),k<0&&(k=0),C>r&&(C=r);for(var P=h[0]-y[0],M=h[1]-y[1],x=P*P+M*M,w=S;w<b;w++)for(var Z=k;Z<C;Z++){var L=void 0,A=void 0,I=(w-y[0])*P+(Z-y[1])*M;I<0?(L=y[0],A=y[1]):I>x?(L=h[0],A=h[1]):(I/=x,L=y[0]+I*P,A=y[1]+I*M);var X=(w-L)*(w-L)+(Z-A)*(Z-A),z=(r-Z-1)*t+w;X<o[z]&&(o[z]=X)}}}catch(O){s.e(O)}finally{s.f()}for(var J=0;J<a;++J)o[J]=Math.sqrt(o[J]);return o}(u,c,s,o);return e.asFill&&function(e,t,r,i,a){var o,l=(0,n.Z)(e);try{for(l.s();!(o=l.n()).done;)for(var f=o.value,c=f.length,s=1;s<c;++s){var u=f[s-1],m=f[s],v=void 0,y=void 0,h=void 0,p=void 0;u[0]<m[0]?(v=u[0],y=m[0]):(v=m[0],y=u[0]),u[1]<m[1]?(h=u[1],p=m[1]):(h=m[1],p=u[1]);var d=Math.floor(v),g=Math.floor(y)+1,N=Math.floor(h),S=Math.floor(p)+1;d<i&&(d=i),g>t-i&&(g=t-i),N<i&&(N=i),S>r-i&&(S=r-i);for(var b=N;b<S;++b)if(u[1]>b!=m[1]>b){for(var k=(r-b-1)*t,C=d;C<g;++C)C<(m[0]-u[0])*(b-u[1])/(m[1]-u[1])+u[0]&&(a[k+C]=-a[k+C]);for(var P=i;P<d;++P)a[k+P]=-a[k+P]}}}catch(O){l.e(O)}finally{l.f()}}(u,c,s,o,C),[v(C,o),c,s]}function v(e,t){for(var r=2*t,i=e.length,n=new Uint8Array(4*i),o=0;o<i;++o){var l=.5-e[o]/r;(0,a.I)(l,n,4*o)}return n}},79815:function(e,t,r){r.d(t,{S:function(){return Q},c:function(){return L}});var i=r(1413),n=r(37762),a=r(29439),o=r(93433),l=r(15861),f=r(87757),c=r(51995),s=r(84652),u=r(32718),m=r(92026),v=r(17842),y=r(643),h=r(819),p=r(78915),d=r(48202),g=r(6388),N=r(31027),S=r(95954),b=r(91935),k=r(88750),C=u.Z.getLogger("esri.symbols.cim.cimAnalyzer");function O(e){switch(e){case"Butt":return d.RL.BUTT;case"Square":return d.RL.SQUARE;default:return d.RL.ROUND}}function P(e){switch(e){case"Bevel":return d.AH.BEVEL;case"Miter":return d.AH.MITER;default:return d.AH.ROUND}}function M(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function x(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function w(e,t,r,i){var n;e[t]?n=e[t]:(n={},e[t]=n),n[r]=i}function Z(e){var t=e.markerPlacement;return t&&t.angleToLine?d.v2.MAP:d.v2.SCREEN}function L(e,t,r,i,n){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(f.mark((function e(t,r,i,a,o){var l,c,s,u,m,v,y,p,d;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=null!=a?a:[],t){e.next=3;break}return e.abrupt("return",l);case 3:if(u={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(C.error("Expect cim type to be 'CIMSymbolReference'"),l));case 6:if(c=t.symbol,!(s=t.primitiveOverrides)){e.next=14;break}m=[],v=(0,n.Z)(s);try{for(p=function(){var e=y.value,t=e.valueExpressionInfo;if(t&&r){var i=t.expression,n=(0,h.Yi)(i,r.spatialReference,r.fields).then((function(t){t&&w(u,e.primitiveName,e.propertyName,t)}));m.push(n)}else null!=e.value&&w(u,e.primitiveName,e.propertyName,e.value)},v.s();!(y=v.n()).done;)p()}catch(f){v.e(f)}finally{v.f()}if(e.t0=m.length>0,!e.t0){e.next=14;break}return e.next=14,Promise.all(m);case 14:if(ee(c,i,d=[]),e.t2=d.length>0,!e.t2){e.next=20;break}return e.next=20,Promise.all(d);case 20:e.t1=c.type,e.next="CIMPointSymbol"===e.t1||"CIMLineSymbol"===e.t1||"CIMPolygonSymbol"===e.t1?23:24;break;case 23:I(c,s,u,r,l,i,o);case 24:return e.abrupt("return",l);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r,i,n,a,l){if(e){var f=e.symbolLayers;if(f){var c,s=e.effects,u=p.B$.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(c=d.v2.MAP);for(var m=f.length;m--;){var v,y=f[m];if(y&&!1!==y.enable){var h=void 0;s&&s.length&&(h=(0,o.Z)(s));var g=y.effects;g&&g.length&&(s?(v=h).push.apply(v,(0,o.Z)(g)):h=(0,o.Z)(g));var N,S=[];p.E0.findEffectOverrides(h,t,S),N=S.length>0?V(h,S,r,i):h;var b=[];switch(p.E0.findApplicableOverrides(y,t,b),y.type){case"CIMSolidFill":X(y,N,r,b,i,n);break;case"CIMPictureFill":z(y,N,r,b,i,a,n);break;case"CIMHatchFill":J(y,N,r,b,i,n);break;case"CIMGradientFill":R(y,N,r,b,i,n);break;case"CIMSolidStroke":H(y,N,r,b,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMPictureStroke":Y(y,N,r,b,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMGradientStroke":E(y,N,r,b,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMCharacterMarker":if(F(y,N,r,b,i,n))break;break;case"CIMPictureMarker":if(F(y,N,r,b,i,n))break;"CIMLineSymbol"===e.type&&(c=Z(y)),B(y,N,r,b,i,a,n,c,u);break;case"CIMVectorMarker":if(F(y,N,r,b,i,n))break;"CIMLineSymbol"===e.type&&(c=Z(y)),T(y,N,r,b,i,n,a,c,u,l);break;default:C.error("Cannot analyze CIM layer",y.type)}}}}}}function X(e,t,r,i,n,o){var l=e.primitiveName,f=(0,N.NO)(e.color),c=K(i,l,t,null),s=(0,a.Z)(c,2),u=s[0],m=s[1],v=(0,y.hP)(JSON.stringify(e)+m).toString();o.push({type:"fill",templateHash:v,materialHash:u?function(){return v}:v,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:j(l,r,"Color",n,f,D),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function z(e,t,r,i,n,o,l){var f=e.primitiveName,c=e.tintColor?(0,N.NO)(e.tintColor):{r:255,g:255,b:255,a:1},s=K(i,f,t,null),u=(0,a.Z)(s,2),v=u[0],h=u[1],p=(0,y.hP)(JSON.stringify(e)+h).toString(),d=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),g=(0,N.NA)(e.scaleX);if("width"in e){var S=e.width,b=1,k=o.getResource(e.url);(0,m.pC)(k)&&(b=k.width/k.height),g/=b*(e.height/S)}l.push({type:"fill",templateHash:p,materialHash:v?function(){return d}:d,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:j(f,r,"TintColor",n,c,D),height:j(f,r,"Height",n,e.height),scaleX:j(f,r,"ScaleX",n,g),angle:j(f,r,"Rotation",n,(0,N.NA)(e.rotation)),offsetX:j(f,r,"OffsetX",n,(0,N.NA)(e.offsetX)),offsetY:j(f,r,"OffsetY",n,(0,N.NA)(e.offsetY)),url:e.url})}function J(e,t,r,i,n,o){var l=["Rotation","OffsetX","OffsetY"],f=i.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===l.indexOf(t.propertyName)})),c=e.primitiveName,s=K(i,c,t,null),u=(0,a.Z)(s,2),m=u[0],v=u[1],h=(0,y.hP)(JSON.stringify(e)+v).toString(),p=(0,y.hP)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();o.push({type:"fill",templateHash:h,materialHash:m?_(p,r,f,n):p,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:j(c,r,"Separation",n,e.separation),scaleX:1,angle:j(c,r,"Rotation",n,(0,N.NA)(e.rotation)),offsetX:j(c,r,"OffsetX",n,(0,N.NA)(e.offsetX)),offsetY:j(c,r,"OffsetY",n,(0,N.NA)(e.offsetY))})}function R(e,t,r,i,n,o){var l=K(i,e.primitiveName,t,null),f=(0,a.Z)(l,2),c=f[0],s=f[1],u=(0,y.hP)(JSON.stringify(e)+s).toString();o.push({type:"fill",templateHash:u,materialHash:c?_(u,r,i,n):u,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function H(e,t,r,i,n,l,f,c){var s,u,m=e.primitiveName,v=(0,N.NO)(e.color),h=void 0!==e.width?e.width:4,p=O(e.capStyle),d=P(e.joinStyle),g=e.miterLimit,S=K(i,m,t,null),b=(0,a.Z)(S,2),k=b[0],C=b[1],M=(0,y.hP)(JSON.stringify(e)+C).toString();if(t&&t instanceof Array&&t.length>0){var x=t[t.length-1];if("CIMGeometricEffectDashes"===x.type&&"NoConstraint"===x.lineDashEnding&&null===x.offsetAlongLine){var w=(t=(0,o.Z)(t)).pop();s=w.dashTemplate,u=w.scaleDash}}l.push({type:"line",templateHash:M,materialHash:k?function(){return M}:M,cim:e,materialOverrides:null,isOutline:f,colorLocked:e.colorLocked,effects:t,color:j(m,r,"Color",n,v,D),width:j(m,r,"Width",n,h),cap:j(m,r,"CapStyle",n,p),join:j(m,r,"JoinStyle",n,d),miterLimit:j(m,r,"MiterLimit",n,g),referenceWidth:c,zOrder:W(e.name),dashTemplate:s,scaleDash:u})}function Y(e,t,r,i,n,o,l,f){var c=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),s=e.primitiveName,u=(0,N.NO)(e.tintColor),m=void 0!==e.width?e.width:4,v=O(e.capStyle),h=P(e.joinStyle),p=e.miterLimit,d=K(i,s,t,null),g=(0,a.Z)(d,2),S=g[0],b=g[1],k=(0,y.hP)(JSON.stringify(e)+b).toString();o.push({type:"line",templateHash:k,materialHash:S?function(){return c}:c,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:j(s,r,"TintColor",n,u,D),width:j(s,r,"Width",n,m),cap:j(s,r,"CapStyle",n,v),join:j(s,r,"JoinStyle",n,h),miterLimit:j(s,r,"MiterLimit",n,p),referenceWidth:f,zOrder:W(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function E(e,t,r,i,n,o,l,f){var c=e.primitiveName,s=void 0!==e.width?e.width:4,u=O(e.capStyle),m=P(e.joinStyle),v=e.miterLimit,h=K(i,c,t,null),p=(0,a.Z)(h,2),d=p[0],g=p[1],N=(0,y.hP)(JSON.stringify(e)+g).toString();o.push({type:"line",templateHash:N,materialHash:d?_(N,r,i,n):N,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:j(c,r,"Width",n,s),cap:j(c,r,"CapStyle",n,u),join:j(c,r,"JoinStyle",n,m),miterLimit:j(c,r,"MiterLimit",n,v),referenceWidth:f,zOrder:W(e.name),dashTemplate:null,scaleDash:!1})}function F(e,t,r,i,n,o){var l=e.markerPlacement;if(!l||"CIMMarkerPlacementInsidePolygon"!==l.type)return!1;var f=l,c=["Rotation","OffsetX","OffsetY"],s=i.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName)})),u="url"in e?e.url:null,m=K(i,f.primitiveName,t,null),v=(0,a.Z)(m,2),h=v[0],p=v[1],d=(0,y.hP)(JSON.stringify(e)+p).toString(),g=f.stepY,S=null,b=1;return l.shiftOddRows&&(g*=2,S=function(e){return e?2*e:0},b=.5),o.push({type:"fill",templateHash:d,materialHash:h?_(d,r,s,n):d,cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:j(f.primitiveName,r,"StepY",n,g,S),scaleX:b,angle:j(f.primitiveName,r,"GridAngle",n,f.gridAngle),offsetX:j(f.primitiveName,r,"OffsetX",n,(0,N.NA)(f.offsetX)),offsetY:j(f.primitiveName,r,"OffsetY",n,(0,N.NA)(f.offsetY)),url:u}),!0}function B(e,t,r,i,n,o,l,f,c){var s,u=e.primitiveName,v=(0,N.NA)(e.size),h=(0,N.NA)(e.scaleX),p=(0,N.NA)(e.rotation),d=(0,N.NA)(e.offsetX),g=(0,N.NA)(e.offsetY),S=e.tintColor?(0,N.NO)(e.tintColor):{r:255,g:255,b:255,a:1},b=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),k=K(i,u,t,q(e.markerPlacement,i,r,n)),C=(0,a.Z)(k,2),O=C[0],P=C[1],M=(0,y.hP)(JSON.stringify(e)+P).toString(),x=null!=(s=e.anchorPoint)?s:{x:0,y:0};if("width"in e){var w=e.width,Z=1,L=o.getResource(e.url);(0,m.pC)(L)&&(Z=L.width/L.height),h/=Z*(v/w)}l.push({type:"marker",templateHash:M,materialHash:O?function(){return b}:b,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:f,size:j(u,r,"Size",n,v),scaleX:j(u,r,"ScaleX",n,h),rotation:j(u,r,"Rotation",n,p),offsetX:j(u,r,"OffsetX",n,d),offsetY:j(u,r,"OffsetY",n,g),color:j(u,r,"TintColor",n,S,D),anchorPoint:{x:x.x,y:-x.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function T(e,t,r,i,a,o,l,f,c,s){var u=e.markerGraphics;if(u){var m=0;if(e.scaleSymbolsProportionally){var v=e.frame;v&&(m=v.ymax-v.ymin)}var y,h=q(e.markerPlacement,i,r,a),p=(0,n.Z)(u);try{for(p.s();!(y=p.n()).done;){var d=y.value;if(d){var g=d.symbol;if(!g)continue;switch(g.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":U(e,t,h,d,i,r,a,o,l,f,c,m,s);break;case"CIMTextSymbol":G(e,t,h,d,r,i,a,o,f,c,m)}}}}catch(N){p.e(N)}finally{p.f()}}}function G(e,t,r,n,o,l,f,c,s,u,m){p.E0.findApplicableOverrides(n,l,[]);var v=n.geometry;if("x"in v&&"y"in v){var h=n.symbol,d=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}(h),g=function(e){var t="",r="";if(e){var i=e.toLowerCase();-1!==i.indexOf("italic")?t="italic":-1!==i.indexOf("oblique")&&(t="oblique"),-1!==i.indexOf("bold")?r="bold":-1!==i.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(h.fontStyleName),S=(0,k.BN)(h.fontFamilyName);h.font=(0,i.Z)({family:S,decoration:d},g);var b=e.frame,C=v.x-.5*(b.xmin+b.xmax),O=v.y-.5*(b.ymin+b.ymax),P=e.size/m,w=e.primitiveName,Z=(0,N.NA)(h.height)*P,L=(0,N.NA)(h.angle),A=(0,N.NA)(e.offsetX)+((0,N.NA)(h.offsetX)+C)*P,I=(0,N.NA)(e.offsetY)+((0,N.NA)(h.offsetY)+O)*P,X=(0,N.NO)(p.B$.getFillColor(h)),z=(0,N.NO)(p.B$.getStrokeColor(h)),J=p.B$.getStrokeWidth(h);J||(z=(0,N.NO)(p.B$.getFillColor(h.haloSymbol)),J=h.haloSize*P);var R=K(l,w,t,r),H=(0,a.Z)(R,2),Y=H[0],E=H[1],F=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),B=(0,y.hP)(JSON.stringify(n)+F+E).toString(),T=j(n.primitiveName,o,"TextString",f,n.textString,N.X3,h.textCase);if(null!=T){var G=h.fontStyleName,U=S+(G?"-"+G.toLowerCase():"-regular"),$=U;"string"==typeof T&&T.indexOf("[")>-1&&h.fieldMap&&(T=(0,N.Qs)(h.fieldMap,T,h.textCase)),c.push({type:"text",templateHash:B,materialHash:Y||"function"==typeof T||T.match(/\[(.*?)\]/)?function(e,t,r){return $+"-"+(0,N.hf)(T,e,t,r)}:$+"-"+(0,y.hP)(T),cim:h,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:s,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:U,decoration:d,weight:j(w,o,"Weight",f,g.weight),style:j(w,o,"Size",f,g.style),size:j(w,o,"Size",f,Z),angle:j(w,o,"Rotation",f,L),offsetX:j(w,o,"OffsetX",f,A),offsetY:j(w,o,"OffsetY",f,I),horizontalAlignment:M(h.horizontalAlignment),verticalAlignment:x(h.verticalAlignment),text:T,color:X,outlineColor:z,outlineSize:J,referenceSize:u,sizeRatio:1,markerPlacement:r})}}}function U(e,t,r,o,l,f,c,s,u,v,h,d,b){var k=o.symbol,C=k.symbolLayers;if(C)if(b)$(e,t,r,o,f,l,c,s,u,v,h,d);else{var O=C.length;if(re(C))!function(e,t,r,o,l,f,c,s,u,m,v,h){var d=o.geometry,S=l[0],b=l[1],k=(0,g.bk)(d);if(!k)return;var C,O=(0,g.UV)(k,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),P=(0,a.Z)(O,3),M=P[0],x=P[1],w=P[2],Z={type:"sdf",geom:d,asFill:!0},L=e.primitiveName,A=(0,N.NA)(e.size),I=(0,N.NA)(e.rotation),X=(0,N.NA)(e.offsetX),z=(0,N.NA)(e.offsetY),J=b.path,R=b.primitiveName,H=S.primitiveName,Y=(0,N.NO)(p.B$.getFillColor(b)),E=(0,N.NO)(p.B$.getStrokeColor(S)),F=p.B$.getStrokeWidth(S),B=!1,T="",G=(0,n.Z)(f);try{for(G.s();!(C=G.n()).done;){var U=C.value;U.primitiveName!==R&&U.primitiveName!==H&&U.primitiveName!==L||(void 0!==U.value?T+="-".concat(U.primitiveName,"-").concat(U.propertyName,"-").concat(JSON.stringify(U.value)):U.valueExpressionInfo&&(B=!0))}}catch(q){G.e(q)}finally{G.f()}var $=JSON.stringify((0,i.Z)((0,i.Z)({},e),{},{markerGraphics:null})),W=(0,y.hP)(JSON.stringify(Z)+J).toString(),V={type:"marker",templateHash:(0,y.hP)(JSON.stringify(o)+JSON.stringify(b)+JSON.stringify(S)+$+T).toString(),materialHash:B?function(){return W}:W,cim:Z,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:x,y:w},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,c,"Size",s,A),rotation:j(e.primitiveName,c,"Rotation",s,I),offsetX:j(e.primitiveName,c,"OffsetX",s,X),offsetY:j(e.primitiveName,c,"OffsetY",s,z),scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:v,sizeRatio:M,color:j(R,c,"Color",s,Y,D),outlineColor:j(H,c,"Color",s,E,D),outlineWidth:j(H,c,"Width",s,F),markerPlacement:r,path:J};u.push(V)}(e,t,r,o,C,l,f,c,s,v,h,d);else{var P=S.j.applyEffects(k.effects,o.geometry,u.geometryEngine);if(P)for(;O--;){var M=C[O];if(M&&!1!==M.enable)switch(M.type){case"CIMSolidFill":case"CIMSolidStroke":var x,w=function(){var b=S.j.applyEffects(M.effects,P,u.geometryEngine),k=(0,g.bk)(b);if(!k)return"continue";var C=(0,g.UV)(k,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),O=(0,a.Z)(C,3),w=O[0],Z=O[1],L=O[2],A="CIMSolidFill"===M.type,I={type:"sdf",geom:b,asFill:A},X=e.primitiveName,z=null!=(x=(0,N.NA)(e.size))?x:10,J=(0,N.NA)(e.rotation),R=(0,N.NA)(e.offsetX),H=(0,N.NA)(e.offsetY),Y=M.path,E=M.primitiveName,F=(0,N.NO)(A?p.B$.getFillColor(M):p.B$.getStrokeColor(M)),B=A?{r:0,g:0,b:0,a:0}:(0,N.NO)(p.B$.getStrokeColor(M)),T=p.B$.getStrokeWidth(M);if(!A&&!T)return"break";var G,U=!1,$="",W=(0,n.Z)(l);try{for(W.s();!(G=W.n()).done;){var V=G.value;V.primitiveName!==E&&V.primitiveName!==X||(void 0!==V.value?$+="-".concat(V.primitiveName,"-").concat(V.propertyName,"-").concat(JSON.stringify(V.value)):V.valueExpressionInfo&&(U=!0))}}catch(K){W.e(K)}finally{W.f()}(0,m.pC)(t)&&"function"==typeof t&&(U=!0);var q=JSON.stringify((0,i.Z)((0,i.Z)({},e),{},{markerGraphics:null})),_=(0,y.hP)(JSON.stringify(I)+Y).toString(),Q={type:"marker",templateHash:(0,y.hP)(JSON.stringify(o)+JSON.stringify(M)+q+$).toString(),materialHash:U?function(){return _}:_,cim:I,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:v,anchorPoint:{x:Z,y:L},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,f,"Size",c,z),rotation:j(e.primitiveName,f,"Rotation",c,J),offsetX:j(e.primitiveName,f,"OffsetX",c,R),offsetY:j(e.primitiveName,f,"OffsetY",c,H),scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:w,color:j(E,f,"Color",c,F,D),outlineColor:j(E,f,"Color",c,B,D),outlineWidth:j(E,f,"Width",c,T),markerPlacement:r,path:Y};return s.push(Q),"break"}();if("continue"===w)continue;if("break"===w)break;default:$(e,t,r,o,f,l,c,s,u,v,h,d)}}}}}function $(e,t,r,i,o,l,f,c,s,u,h,d){var g,S=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}(e,i),b=["Rotation","OffsetX","OffsetY"];g=l.filter((function(t){return t.primitiveName!==e.primitiveName||-1===b.indexOf(t.propertyName)}));var k,C="",O=(0,n.Z)(l);try{for(O.s();!(k=O.n()).done;){var P=k.value;void 0!==P.value&&(C+="-".concat(P.primitiveName,"-").concat(P.propertyName,"-").concat(JSON.stringify(P.value)))}}catch(H){O.e(H)}finally{O.f()}var M=p.B$.getTextureAnchor(S,s),x=(0,a.Z)(M,3),w=x[0],Z=x[1],L=x[2],A=e.primitiveName,I=(0,N.NA)(e.rotation),X=(0,N.NA)(e.offsetX),z=(0,N.NA)(e.offsetY),J=(0,y.hP)(JSON.stringify(S)+C).toString(),R={type:"marker",templateHash:J,materialHash:g.length>0||(0,m.pC)(t)&&"function"==typeof t?_(J,o,g,f):J,cim:S,materialOverrides:g,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:w,y:Z},isAbsoluteAnchorPoint:!1,size:e.size,rotation:j(A,o,"Rotation",f,I),offsetX:j(A,o,"OffsetX",f,X),offsetY:j(A,o,"OffsetY",f,z),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:L/(0,v.F2)(e.size),markerPlacement:r};c.push(R)}function W(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function D(e){if(!e||0===e.length)return null;var t=new c.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function j(e,t,r,i,n,a,o){var l=t[e];if(l){var f=l[r];if("string"==typeof f||"number"==typeof f||f instanceof Array)return a?a.call(null,f,o):f;if(null!=f&&f instanceof h.mz)return function(e,t,r){var l=(0,b.Z)(f,e,{$view:r},i.geometryType,t);return null!==l&&a&&(l=a.call(null,l,o)),null!==l?l:n}}return n}function V(e,t,r,i){var a,o=(0,n.Z)(t);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.valueExpressionInfo&&function(){var e=r[l.primitiveName]&&r[l.primitiveName][l.propertyName];e instanceof h.mz&&(l.fn=function(t,r,n){return(0,b.Z)(e,t,{$view:n},i.geometryType,r)})}()}}catch(c){o.e(c)}finally{o.f()}var f=function(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e};return function(r,i,a){var o,l=(0,n.Z)(t);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.fn&&(u.value=u.fn(r,i,a))}}catch(c){l.e(c)}finally{l.f()}var m,v=[],y=(0,n.Z)(e);try{for(y.s();!(m=y.n()).done;){var h,p=m.value,d=null==(h=p)?void 0:h.primitiveName;if(d){var g,N=!1,S=(0,n.Z)(t);try{for(S.s();!(g=S.n()).done;){var b=g.value;if(b.primitiveName===d){var k=f(b.propertyName);null!=b.value&&b.value!==p[k]&&(N||(p=(0,s.d9)(p),N=!0),p[k]=b.value)}}}catch(c){S.e(c)}finally{S.f()}}v.push(p)}}catch(c){y.e(c)}finally{y.f()}return v}}function q(e,t,r,i){var a=[];if(p.E0.findApplicableOverrides(e,t,a),0===a.length)return e;for(var o=0,l=a;o<l.length;o++){var f=l[o];f.valueExpressionInfo&&function(){var e=r[f.primitiveName]&&r[f.primitiveName][f.propertyName];e instanceof h.mz&&(f.fn=function(t,r,n){return(0,b.Z)(e,t,{$view:n},i.geometryType,r)})}()}var c=function(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e};return function(t,r,i){var o,l=(0,n.Z)(a);try{for(l.s();!(o=l.n()).done;){var f=o.value;f.fn&&(f.value=f.fn(t,r,i))}}catch(d){l.e(d)}finally{l.f()}var u,m=(0,s.d9)(e),v=e.primitiveName,y=(0,n.Z)(a);try{for(y.s();!(u=y.n()).done;){var h=u.value;if(h.primitiveName===v){var p=c(h.propertyName);null!=h.value&&h.value!==m[p]&&(m[p]=h.value)}}}catch(d){y.e(d)}finally{y.f()}return m}}function _(e,t,r,i){var a,o=(0,n.Z)(r);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.valueExpressionInfo&&function(){var e=t[l.primitiveName]&&t[l.primitiveName][l.propertyName];e instanceof h.mz&&(l.fn=function(t,r,n){return(0,b.Z)(e,t,{$view:n},i.geometryType,r)})}()}}catch(f){o.e(f)}finally{o.f()}return function(t,i,a){var o,l=(0,n.Z)(r);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.fn&&(c.value=c.fn(t,i,a))}}catch(f){l.e(f)}finally{l.f()}return(0,y.hP)(e+p.E0.buildOverrideKey(r)).toString()}}function Q(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return p.E0.applyOverrides(r,t),r}function K(e,t,r,i){var a,o=!1,l="",f=(0,n.Z)(e);try{for(f.s();!(a=f.n()).done;){var c=a.value;c.primitiveName===t&&(void 0!==c.value?l+="-".concat(c.primitiveName,"-").concat(c.propertyName,"-").concat(JSON.stringify(c.value)):c.valueExpressionInfo&&(o=!0))}}catch(s){f.e(s)}finally{f.f()}return(0,m.pC)(r)&&"function"==typeof r&&(o=!0),(0,m.pC)(i)&&"function"==typeof i&&(o=!0),[o,l]}function ee(e,t,r){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=e.symbolLayers;if(!i)return;var a,o=(0,n.Z)(i);try{for(o.s();!(a=o.n()).done;){var l=a.value;switch(ie(l,t,r),l.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in l&&l.url&&r.push(t.fetchResource(l.url,null));break;case"CIMVectorMarker":var f=l.markerGraphics;if(!f)continue;var c,s=(0,n.Z)(f);try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u){var m=u.symbol;m&&ee(m,t,r)}}}catch(v){s.e(v)}finally{s.f()}}}}catch(v){o.e(v)}finally{o.f()}}}var te,re=function(e){return e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects};function ie(e,t,r){e.effects&&!(0,m.pC)(t.geometryEngine)&&(te?r.push(te):(0,N.Cc)(e.effects)&&(te=(0,N.RI)(),r.push(te),te.then((function(e){return t.geometryEngine=e}))))}},95954:function(e,t,r){r.d(t,{j:function(){return u}});var i=r(93433),n=r(37762),a=r(15671),o=r(43144),l=r(77981),f=r(25290),c=r(35747),s=r(7313),u=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"executeEffects",value:function(e,t,r){var i,a=(0,f.GP)(t),o=new c.M(a),l=(0,n.Z)(e);try{for(l.s();!(i=l.n()).done;){var u=i.value,m=(0,s.h)(u);m&&(o=m.execute(o,u,1.3333333333333333,r))}}catch(v){l.e(v)}finally{l.f()}return o}},{key:"next",value:function(e){var t=e.next();return(0,f.wp)(t),t}},{key:"applyEffects",value:function(e,t,r){if(!e)return t;var a,o=new c.M(t),f=(0,n.Z)(e);try{for(f.s();!(a=f.n()).done;){var u=a.value,m=(0,s.h)(u);m&&(o=m.execute(o,u,1,r))}}catch(d){f.e(d)}finally{f.f()}for(var v,y=null;v=o.next();){var h,p;y?(0,l.l9)(y)?(0,l.l9)(v)&&(h=y.paths).push.apply(h,(0,i.Z)(v.paths)):(0,l.oU)(y)&&(0,l.oU)(v)&&(p=y.rings).push.apply(p,(0,i.Z)(v.rings)):y=v}return y}}]),e}()},91935:function(e,t,r){r.d(t,{Z:function(){return l}});var i=r(1413),n=r(10064),a=r(32718),o=r(58971);function l(e,t,r,n,o){var l=e.referencesGeometry()&&o?c(t,n,o):t,f=e.repurposeFeature(l);try{return e.evaluate((0,i.Z)((0,i.Z)({},r),{},{$feature:f}))}catch(s){return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",s),null}}var f=new Map;function c(e,t,r){var l=r.transform,c=r.hasZ,s=r.hasM;f.has(t)||f.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,i,n){return(0,o.U1)(r,t,e,i,n)};case"esriGeometryPolygon":return function(e,r,i,n){return(0,o.Ie)(r,t,e,i,n)};case"esriGeometryPolyline":return function(e,r,i,n){return(0,o.G6)(r,t,e,i,n)};case"esriGeometryMultipoint":return function(e,r,i,n){return(0,o.J9)(r,t,e,i,n)};default:return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(t));var u=f.get(t)(e.geometry,l,c,s);return(0,i.Z)((0,i.Z)({},e),{},{geometry:u})}},88750:function(e,t,r){r.d(t,{BN:function(){return i},Yc:function(){return n}});function i(e){var t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function n(e){var t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return i(e.family)+(t.length>0?t:"-regular")}}}]);
//# sourceMappingURL=9815.052cb73a.chunk.js.map